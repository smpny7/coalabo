---
title: "誰にとってもわかりやすいコミットメッセージ"
description: "さまざまなオープンソースのリポジトリを見てきて、自分なりのコミットメッセージの付け方をここで統一することにしました！"
date: 2021-06-05T22:00:00+21:00
slug: commit-message
image: cover.jpg
categories:
    - GitHub
tags:
    - 覚え書き
---

## みんなコミットメッセージってどんなふうに書いてるのかな？

ふと気になって、さまざまなオープンソースのコミットメッセージをみてきました。

今まで自分が使ってきたコミットメッセージがあまりにも一般的じゃなかったので、ここで統一したいと思います！（覚え書き）


## これまでのコミットメッセージの付け方

はじめて共同プロジェクトを立ち上げた時に、とあるネット上の人のコミットメッセージの書き方を真似て、マイルールとしていました。

大かっこ[]の中に Prefix を入れ（例：`add` `fix` `hotfix` など）、その後に日本語でコミットメッセージを記入するという形でしたが、
あまりこの書き方をしている人が多くなかったのです...

```shell
[add] リアルタイムデータベースとの通信機能
```


## もっとも多かった印象がある & かっこよかったもの

```shell
Add: リアルタイムデータベースとの通信機能
```

やっぱこういう Prefix のつけ方がかっこいいですよね。

あと当たり前ですが、英語でのコミットメッセージが多かったので、個人開発は英語、友人との共同開発は日本語という感じに分けてもいいですね。


## Prefix で代表的なもの

`add`・`update`・`upgrade`・`fix`・`hotfix` などはよく聞きますが、どういった Prefix が共通認識としてよく使われているのでしょうか。

また、`update` と `upgrade` など、違いがよくわからないものも多いので、使う場合のシチュエーションも同時に調べてみたいと思います。

| Prefix | 使うシチュエーション |
| :--- | :--- |
| Add: | 機能やファイルなどの追加 |
| Improve: | コードの改善・リファクタリング |
| Change: | 仕様変更 |
| Update: | 機能修正（バグではない） |
| Upgrade: | バージョンアップ |
| Disable: | 機能の無効化（コメントアウト等） |
| Rename: | ファイル名を変更する |
| Remove: | ファイルを削除する |
| Move: | ファイルを移動する |
| Fix: | バグ修正 |
| Hotfix: | クリティカルなバグ修正 |
| Revert: | 変更取り消し |


調べてみた結果、`update` と `upgrade` は上記のように分けている人もいれば、`update`　がバージョンアップとしている人もいました。
また、`improve` の代わりに `clean` を使う人も多かったですが、こちらはシチュエーションは同じなので問題にはならなそうです。
`change` と `update` もほぼ同じ印象を受けました。

上の表の中では、`update` は二重の捉え方があるので、使うときは気にかけておく方がよさそうですね。。


## では、自分なりの Prefix 表を作ってみよう

上記でさまざまな Prefix を洗い出してみて、その問題点を踏まえた上で、誰にとってもわかりやすい Prefix を自分で決めておきたいと思います。

また、`Rename` や `Move` などはあまりよく使った記憶がないので、今回表からは外しておきます。
（スタートアップなどの経験が多く、長期的なメンテナンス経験をあまりしてこなかったのも原因かも...）

| Prefix | 使うシチュエーション |
| :--- | :--- |
| Add: | 機能やファイルなどの追加 |
| Clean: | コードの改善・リファクタリング |
| Change: | 仕様変更 |
| Upgrade: | バージョンアップ |
| Disable: | 機能の無効化（コメントアウト等） |
| Fix: | バグ修正 |
| Hotfix: | クリティカルなバグ修正 |

曖昧な `update` という Prefix は今回避け、`improve` も若干 `update` と被る気がしたので、
完全にリファクタリング（仕様はそのままでコードをすっきりさせる）という意味がはっきりと伝わるように `clean` に変更しました。

この最小編成でとりあえずは立ち回ろうと思います！


## コミットメッセージって1行しか対応していないと思ってました

コミットメッセージって、みなさん複数行で書くんですね。
コミットメッセージ内に Enter って入れられないものだと思ってました(笑)

コミットメッセージは、`Subject` ・ `Body` ・ `Footer` という形で書くらしいです。

|  |  |
| :--- | :--- |
| Subject | そのコミットで何をしたのかをまとめた短い文章 |
| Body | 追加や修正が必要だった理由など |
| Footer | Issue の ID やタイトル |

1行目に `Subject`、2行目に空行で、3行目に内容を書きます。
1行目の `Subject` に書く内容は72文字以上は省略されるので、72文字以内が良さそうです。

イメージとしては以下の書き方です。

```txt
Add: リアルタイムデータベースとの通信機能

Firebase を使ってランキングを保存できるようにしました。
...（略）...

#103 Issue のタイトル
```

また、`Body` と `Footer` は分けず、以下のようにしているものもありました。

```txt
Add: リアルタイムデータベースとの通信機能

refs #103 Firebase を使ってランキングを保存できるようにしました。
...（略）...
```

ですが、個人で開発するプロジェクトに関しては、ここまでしなくても内容はわかるかなとも思います。


## それぞれの案件に応じて臨機応変に対応する

どれだけの人数でプロジェクトを進めていくのか、どのくらい長期的にメンテナンスしていくのかによって、
コミットメッセージのクオリティを変えていくのがベストプラクティスかなと思います。